Critical section problem with pthreads
